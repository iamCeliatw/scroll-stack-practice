import{__assign as e,__awaiter as t,__generator as n,__read as r,__values as o,__extends as i}from"tslib";import{LiffModule as a}from"@liff/use";import{done as c}from"@liff/ready";import{isLoggedIn as s}from"@liff/is-logged-in";import{convertHexToRgb as l,convertArgbToRgba as f,createLiffError as u,base64Url as d,convertArrayBuffer as h,compareVersion as p,qs as v,extractChannelIdFromLiffId as m,addParamsToUrl as w,randomAlphaNumericString as b,replaceUrlCredentialRemoved as g}from"@liff/util";import{getContext as k,getLoginTmp as C,getExpireTime as F,getIsSubsequentLiffApp as I,getFeatureToken as y,setIsSubsequentLiffApp as _,getMST as B,getAccessToken as x,getRawContext as S,getIDToken as T,getClientId as A,getMSTChallenge as E,getMSTVerifier as L,getMSIT as N,getConfig as D,setDecodedIDToken as U,setAppData as O,setMST as P,setFeatureToken as W,setExpireTime as j,setAccessToken as H,setContext as K,setMSTChallenge as M,setMSTVerifier as R,setClientId as J,setMSIT as V,setIDToken as q,getDecodedIDToken as z,removeLoginTmp as G,setConfig as Q}from"@liff/store";import{CheckAvailability as X}from"@liff/check-availability";import{FORBIDDEN as Y,INIT_FAILED as Z,INVALID_ID_TOKEN as $,SUB_WINDOW_STATUS as ee,SUB_WINDOW_HEALTH_CHECK_MESSAGE as te,INVALID_CONFIG as ne}from"@liff/consts";import{load as re}from"@liff/extensions";import{isInClient as oe}from"@liff/is-in-client";import{logout as ie}from"@liff/logout";import{isSubWindow as ae}from"@liff/is-sub-window";import{getMSTByMSIT as ce,getAppData as se,getMainWindowOrigin as le,getMessageBus as fe,initMessageBus as ue,setMainWindowOrigin as de}from"@liff/sub-window";import{fetch as he,getEndPoint as pe,verifyAccessToken as ve}from"@liff/server-api";import{logger as me}from"@liff/logger";import{getLineVersion as we}from"@liff/get-line-version";import{addListener as be,removeListener as ge}from"@liff/native-bridge";import{isApiAvailable as ke}from"@liff/is-api-available";import{getOS as Ce}from"@liff/get-os";import{login as Fe}from"@liff/login";import{closeWindow as Ie}from"@liff/close-window";import{EVENT_NAME as ye,WINDOW as _e,IDENTIFIER_KEY as Be}from"@liff/message-bus";import{AsyncHook as xe}from"@liff/hooks";import{t as Se}from"@liff/i18n";var Te={iconColor:"#111111",statusBarColor:"BLACK",titleTextColor:"#111111",titleSubtextColor:"#B7B7B7",titleButtonColor:"#111111",titleBackgroundColor:"#FFFFFF",progressBarColor:"#06C755",progressBackgroundColor:"#FFFFFF",titleButtonAreaBackgroundColor:"#1FFFFFFF",titleButtonAreaBorderColor:"#26000000",baseBackgroundColor:"#FFFFFF",baseTextColor:"#000000",lightButtonBorderColor:"rgba(0, 0, 0, 0.15)"},Ae={iconColor:"#FFFFFF",statusBarColor:"WHITE",titleTextColor:"#FFFFFF",titleSubtextColor:"#949494",titleButtonColor:"#FFFFFF",titleBackgroundColor:"#111111",progressBarColor:"#06C755",progressBackgroundColor:"#111111",titleButtonAreaBackgroundColor:"#1FFFFFFF",titleButtonAreaBorderColor:"#26000000",baseBackgroundColor:"#000000",baseTextColor:"#FFFFFF",lightButtonBorderColor:"rgba(255, 255, 255, 0.5)"};function Ee(){var e;De("color-scheme",((null==(e=k())?void 0:e.menuColorSetting)||{adaptableColorSchemes:["light"]}).adaptableColorSchemes.join(" "));var t=window.matchMedia("(prefers-color-scheme: dark)");Le({matches:null==t?void 0:t.matches,media:null==t?void 0:t.media}),t.addEventListener?t.addEventListener("change",Le):t.addListener&&t.addListener(Le)}function Le(t){var n=k(),r=(null==n?void 0:n.menuColorSetting)||{adaptableColorSchemes:["light"],lightModeColor:Te,darkModeColor:Ae},o=r.adaptableColorSchemes,i=r.lightModeColor,a=r.darkModeColor,c=o.includes("dark");t.matches&&c?Ne(e(e({},Ae),a)):Ne(e(e({},Te),i))}function Ne(e){var t=e.iconColor,n=e.statusBarColor,r=e.titleTextColor,o=e.titleSubtextColor,i=e.titleButtonColor,a=e.titleBackgroundColor,c=e.progressBarColor,s=e.progressBackgroundColor,u=e.titleButtonAreaBackgroundColor,d=e.titleButtonAreaBorderColor,h=e.baseBackgroundColor,p=e.baseTextColor,v=e.lightButtonBorderColor;De("--liff-base-background-color",h),De("--liff-base-text-color",p),De("--liff-base-background-rgb-color",l(h)),De("--liff-base-text-rgb-color",l(p)),De("--liff-light-button-border-color",v),De("--liff-title-text-color",r),De("--liff-title-background-color",a),De("--liff-title-button-color",i),De("--liff-icon-color",t),De("--liff-status-bar-color",n),De("--liff-title-subtext-color",o),De("--liff-progress-bar-color",c),De("--liff-progress-background-color",s),De("--liff-title-button-area-background-color",f(u)),De("--liff-title-button-area-border-color",f(d))}function De(e,t){document.documentElement.style.setProperty(e,t)}var Ue={addToHomeScreen:function(e){if(!new X(e).invoke("addToHomeScreen"))throw u(Y,"No permission for liff.addToHomeScreen()")},scanCode:function(e){if(!new X(e).invoke("scanCode"))return Promise.reject(u(Y,"No permission for liff.scanCode()"))},getAdvertisingId:function(e){if(!new X(e).invoke("getAdvertisingId"))return Promise.reject(u(Y,"No permission for liff.getAdvertisingId()"))},initPlugins:function(){}};function Oe(e){return t(this,void 0,void 0,(function(){var t;return n(this,(function(n){switch(n.label){case 0:return[4,re()];case 1:return(t=n.sent())?(t.install(e,Ue),[2]):[2]}}))}))}function Pe(){return t(this,void 0,void 0,(function(){return n(this,(function(e){switch(e.label){case 0:return[4,he(pe("certs"))];case 1:return[2,e.sent()]}}))}))}function We(e,r,o){return t(this,void 0,void 0,(function(){var t;return n(this,(function(n){switch(n.label){case 0:return[4,crypto.subtle.importKey("jwk",e,{name:"ECDSA",namedCurve:"P-256"},!1,["verify"])];case 1:return t=n.sent(),[4,crypto.subtle.verify({name:"ECDSA",hash:{name:"SHA-256"}},t,o,r)];case 2:return[2,n.sent()]}}))}))}function je(e,o){return t(this,void 0,void 0,(function(){var t,i,a,c,s,l,f,p,v,m,w,b,g,k,C,F;return n(this,(function(n){switch(n.label){case 0:return t=e.split("."),i=r(t,3),a=i[0],c=i[1],s=i[2],l=JSON.parse(d.decode(a)),f=JSON.parse(d.decodeUnicode(c)),p=h(d.decode(s)),v=h("".concat(a,".").concat(c)),[4,Pe()];case 1:if(m=n.sent(),!(w=m.keys.find((function(e){return e.kid===l.kid}))))return[3,6];if(delete w.alg,"ES256"!==l.alg)throw u($,'Invalid "alg" value in ID_TOKEN');b=void 0,n.label=2;case 2:return n.trys.push([2,4,,5]),[4,We(w,v,p)];case 3:return b=n.sent(),[3,5];case 4:throw g=n.sent(),u($,"".concat("Failed to use Crypto API to verify ID_TOKEN",": ").concat(g));case 5:if(b){if(k=f.iss!=="https://access.".concat("line.me"),C=f.aud!==o,F=1e3*f.exp<Date.now(),k)throw u($,'Invalid "iss" value in ID_TOKEN');if(C)throw u($,'Invalid "aud" value in ID_TOKEN');if(F)throw u($,'Invalid "exp" value in ID_TOKEN');return[2,f]}throw u($,"Invalid signature in ID_TOKEN");case 6:throw u($,'Invalid "kid" value in ID_TOKEN');case 7:return[2]}}))}))}function He(e){var t=e.split(".");if(t[1])try{var n=t[1].replace(/-/g,"+").replace(/_/g,"/");return JSON.parse(window.atob(n))}catch(r){return null}return null}function Ke(e){var t=e.pathname,n=e.query,r=n?"?".concat(v.stringify(n)):"",o="".concat("liff://").concat(t).concat(r);location.href=o}var Me=null;function Re(){"boolean"==typeof Me&&me.warn("liff.init is not expected to be called more than once"),Me=!!I()||!(!oe()||v.parse(window.location.hash).feature_token||y())&&(_(!0),!0)}function Je(){return Boolean(Me)}function Ve(e,r){return t(this,void 0,void 0,(function(){var t;return n(this,(function(n){switch(n.label){case 0:return(t=B())?[2,t]:e&&r?[4,ce({msit:e,mstVerifier:r})]:[3,2];case 1:return[2,n.sent().mst];case 2:return[2,null]}}))}))}function qe(e){return he("".concat(pe("apps"),"/").concat(e,"/featureToken"))}function ze(e){return t(this,void 0,void 0,(function(){var t,r,i,a;return n(this,(function(n){switch(n.label){case 0:return t=v.parse(window.location.hash),r=function(e){for(var t,n,r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];var a=function(t){Object.keys(t).filter((function(e){return null!==t[e]&&void 0!==t[e]})).forEach((function(n){e[n]=t[n]}))};try{for(var c=o(r),s=c.next();!s.done;s=c.next()){a(s.value)}}catch(l){t={error:l}}finally{try{s&&!s.done&&(n=c.return)&&n.call(c)}finally{if(t)throw t.error}}return e}({access_token:x(),context_token:S(),feature_token:y(),id_token:T(),client_id:A(),mst_challenge:E(),mst_verifier:L(),msit:N()},t),Je()?s()?[4,qe(e)]:[3,2]:[3,3];case 1:i=n.sent().featureToken,r.feature_token||(r.feature_token=i),n.label=2;case 2:(a=m(e))&&(r.client_id=a),n.label=3;case 3:return[2,r]}}))}))}function Ge(e){if(e.persisted&&ke("multipleLiffTransition"))if("ios"===Ce())window.location.reload();else{var t=D().liffId,n=y();if(!t)throw u(Z,"Invalid LIFF ID.");if(!n)throw u(Y,"Invalid featureToken for client features");Ke({pathname:"app/".concat(t),query:{feature_token:n}})}}function Qe(e){var r,o;return t(this,void 0,void 0,(function(){var t,i,a,c,l,f,d,h,v,b,g,C,F,I,y,_,B;return n(this,(function(n){switch(n.label){case 0:return[4,new Promise((function(e){var t=we();if(!t||p(t,"9.5.0")<0)e();else if(window._liff&&window._liff.features)e();else{me.debug("cannot find window._liff.features, listen to ready event");var n=function(){me.debug("ready event is fired"),ge("ready",n),e()};be("ready",n)}}))];case 1:return n.sent(),Re(),[4,ze(e.liffId)];case 2:if(t=n.sent(),i=t.access_token,a=t.context_token,c=t.feature_token,l=t.id_token,f=t.client_id,d=t.mst_verifier,h=t.mst_challenge,v=t.msit,a){if("string"!=typeof a)throw u(Z,"Cannot get context token, perhaps there is an incorrect parameter in permanent link");K(He(a))}if(void 0!==(null===(r=k())||void 0===r?void 0:r.liffId)&&(null===(o=k())||void 0===o?void 0:o.liffId)!==e.liffId)throw u(Z,"Invalid LIFF ID");return!ae()&&c&&(!function(e,t){ke("multipleLiffTransition")&&Ke({pathname:"app/".concat(e),query:{feature_token:t}})}(e.liffId,c),Je()&&W(c)),h&&M(h),d&&R(d),f&&J(f),v&&V(v),window.addEventListener("pageshow",Ge),s()?[3,5]:c&&i?[3,5]:Je()?(b=w(location.href,{"liff.hback":"2"}),Fe({redirectUri:b}),[4,new Promise((function(){}))]):[3,4];case 3:n.sent(),n.label=4;case 4:throw Fe(),u(Z,"Failed to parse feature_token or access_token");case 5:return i&&c?[4,ve(i)]:[3,7];case 6:if(g=n.sent(),C=g.client_id,F=g.expires_in,I=m(e.liffId),C!==I)throw Fe(),u(Z,"Failed to verify access_token");W(c),j(new Date(Date.now()+1e3*F)),H(i),n.label=7;case 7:return[4,Ve(v,d)];case 8:return(y=n.sent())?(P(y),[4,se({mst:y})]):[3,10];case 9:(_=n.sent().data)&&O(JSON.stringify(_)),n.label=10;case 10:return l&&!T()&&q(l),l&&f&&!z()?[4,je(l,f)]:[3,12];case 11:(B=n.sent())&&U(B),n.label=12;case 12:return[2]}}))}))}function Xe(e){return t(this,void 0,void 0,(function(){var t,r,o,i,a,c,s;return n(this,(function(n){switch(n.label){case 0:return t=pe("apps"),r="".concat(t,"/").concat(e,"/contextToken"),o=x(),i={"Content-Type":"application/json",Accept:"application/json"},o&&(i.Authorization="Bearer ".concat(o)),[4,he(r,{headers:i})];case 1:if(a=n.sent(),!(c=a.contextToken))throw u(Z,"Can not get context from server.");if(!(s=He(c)))throw u(Z,"Invalid context token.");return[2,s]}}))}))}function Ye(){return t(this,void 0,void 0,(function(){var e,t;return n(this,(function(n){switch(n.label){case 0:if(!(e=D().liffId))throw u(Z,"Invalid LIFF ID.");return[4,Xe(e)];case 1:return t=n.sent(),K(t),[2]}}))}))}function Ze(e){return t(this,void 0,void 0,(function(){var r,o,i,a=this;return n(this,(function(c){switch(c.label){case 0:r=function(){return t(a,void 0,void 0,(function(){var t,r,o,i,a,c;return n(this,(function(n){switch(n.label){case 0:return[4,(s=D(),l=v.parse(window.location.search),f=C(),u={grant_type:"authorization_code",client_id:l.liffClientId,appId:s.liffId,code:l.code,code_verifier:f.codeVerifier,redirect_uri:s.redirectUri||l.liffRedirectUri,id_token_key_type:"JWK"},d=v.stringify(u),he(pe("token"),{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"},body:d}))];case 1:return t=n.sent(),r=t.access_token,o=t.id_token,i=t.expires_in,J(e),H(r),j(new Date(Date.now()+1e3*i)),G(),o?(q(o),[4,je(o,e)]):[3,3];case 2:(a=n.sent())&&U(a),n.label=3;case 3:return(c=v.parse(location.hash).context_token)?(K(He(c)),[3,6]):[3,4];case 4:return[4,Ye()];case 5:n.sent(),n.label=6;case 6:return[2]}var s,l,f,u,d}))}))},c.label=1;case 1:return c.trys.push([1,3,,4]),[4,r()];case 2:return c.sent(),[3,4];case 3:throw o=c.sent(),i=o,G(),i;case 4:return[2]}}))}))}function $e(){return t(this,void 0,void 0,(function(){var e,r,o,i,a,c,l=this;return n(this,(function(f){switch(f.label){case 0:return(r=fe())?[3,2]:[4,ue(_e.SUB)];case 1:r=f.sent(),f.label=2;case 2:return(e=r).isReady()?(o=b(8),[4,e.getData("appData")]):[3,8];case 3:return i=f.sent(),a=i.eventName,c=i.data,a!==ye.NOT_FOUND?[3,6]:[4,e.teardown()];case 4:return f.sent(),[4,$e()];case 5:return[2,f.sent()];case 6:c&&O(JSON.stringify(c)),f.label=7;case 7:return e.listen((function(r){return t(l,void 0,void 0,(function(){var t,i;return n(this,(function(n){return t=r.context,i=t.data,t.eventName===ee.INIT&&(null==i?void 0:i.subWindowId)!==o&&Ie(),t.eventName!==ee.CANCEL&&t.eventName!==ee.SUBMIT||e.teardown(),[2]}))}))})),s()&&e.send({eventName:ee.INIT,data:{subWindowId:o,hasOpener:!!window.opener}}),[3,10];case 8:return le()?[3,10]:[4,new Promise((function(e){window.addEventListener("message",function(e){return function t(n){var r=n.data,o=n.source,i=n.origin;if(r){var a=r.type,c=r.message;a===te&&(window.removeEventListener("message",t),c&&O(c),de(i),o&&o.postMessage&&o.postMessage({status:te},i),e())}}}(e))}))];case 9:return[2,f.sent()];case 10:return[2]}}))}))}var et=new(function(){function e(){var e=this;this.getAndValidateContext=function(){var e=k();if(!e)throw u(Z,"Could not get Context from server.");if(!e.endpointUrl)throw u(Z,"Could not get endpointUrl from server.");if(!e.permanentLinkPattern)throw u(Z,"Could not get permanentLinkPattern from server.");return e},this.decodeState=function(t){var n=e.getAndValidateContext();t=t.replace(/\n/g,"%0D%0A");var r=!n.endpointUrl.startsWith("/?")&&n.endpointUrl.includes("/?")||!n.endpointUrl.startsWith("/#")&&n.endpointUrl.includes("/#")||n.endpointUrl.endsWith("/")||!t.startsWith("/?")&&t.includes("/?")||!t.startsWith("/#")&&t.includes("/#")||t.endsWith("/"),o=new URL(n.endpointUrl),i=o.origin,a=o.pathname,c=o.search,s=new URL("".concat(i).concat(e.attachSlashAtStart(t))),l=s.pathname,f=s.search,u=s.hash,d="".concat(c).concat(c?f.replace(/\?/g,"&"):f),h="".concat(a).concat(e.attachSlashAtStart(l)).replace("//","/");return(h=e.attachSlashAtStart("".concat(h))).endsWith("/")&&!r&&(h=h.substring(0,h.length-1)),"".concat(i).concat(h).concat(d).concat(u).replace(/%0D%0A/g,"\n")}}return e.prototype.attachSlashAtStart=function(e){return"".concat(e&&e.length>0&&!e.startsWith("/")?"/":"").concat(e)},e.prototype.invoke=function(){return t(this,void 0,void 0,(function(){var e,t,r,o,i;return n(this,(function(n){switch(n.label){case 0:if(e=v.parse(window.location.search),"string"!=typeof(t=e["liff.state"]))return[2];n.label=1;case 1:return n.trys.push([1,4,,5]),r=location.href,(o=this.decodeState(t))===r?[3,3]:(e["liff.hback"]?location.replace(w(o,{"liff.hback":e["liff.hback"]})):location.replace(o),[4,new Promise((function(){}))]);case 2:n.sent(),n.label=3;case 3:return[3,5];case 4:if((i=n.sent()).code===Z)throw i;return me.debug(i),[3,5];case 5:return[2]}}))}))},e}());function tt(e,r){return t(this,void 0,void 0,(function(){var t;return n(this,(function(n){switch(n.label){case 0:if(!e.liffId)throw u(ne,"liffId is necessary for liff.init()");return Q(e),!oe()&&s()&&(F()||ie()),t=v.parse(window.location.search),!ae()||oe()?[3,2]:[4,$e()];case 1:n.sent(),n.label=2;case 2:if(t.error&&t.liffOAuth2Error)throw a=t.error,c=t.error_description,l=c.replace(/\+/g," "),f="".concat(a,": ").concat(l),u(Z,f);return o=t.code,i=C(),Boolean(o&&!s()&&i&&i.codeVerifier)?[4,Ze(t.liffClientId)]:[3,4];case 3:n.sent(),n.label=4;case 4:return oe()?[4,Qe(e)]:[3,6];case 5:return n.sent(),[3,8];case 6:return s()?[3,8]:[4,Ye()];case 7:n.sent(),n.label=8;case 8:return[4,et.invoke()];case 9:return n.sent(),[4,r()];case 10:return n.sent(),g(window.location.href),[2]}var o,i,a,c,l,f}))}))}var nt=function(e,t){return new Promise((function(n,r){if(e){var o=document.createElement("script");o.type="module",o.onload=function(){n()},o.src=e,document.head.appendChild(o)}else r(u(ne,t))}))},rt=function(e){var t="https://static.line-scdn.net/lui/edge/versions/1.13.0/lui-alert.js";return t&&e&&(t=t.replace(/\d{1,2}\.\d{1,2}\.\d{1,3}/,e)),nt(t,"LUI_ALERT_URL is not defined")},ot=function(){return t(void 0,void 0,void 0,(function(){var e;return n(this,(function(t){switch(t.label){case 0:return e=function(){var e,t=document.querySelector('script[src*="luivendor.js"]');if(t&&(null===(e=t.src.match(/\d{1,2}\.\d{1,2}\.\d{1,3}/g))||void 0===e?void 0:e.length))return t.src.match(/\d{1,2}\.\d{1,2}\.\d{1,3}/g)[0]}(),e?[3,2]:[4,nt("https://static.line-scdn.net/lui/edge/versions/1.13.0/luivendor.js","LUI_VENDOR_URL is not defined")];case 1:t.sent(),t.label=2;case 2:return[4,rt(e)];case 3:return t.sent(),[4,(n=b(6),new Promise((function(){var e=document.createElement("div");e.innerHTML='<lui-alert id="'.concat("liffAlert","-").concat(n,'" shown title="').concat(Se("alert.android.extBrowser.autoLoginWorkaround.title"),'" message="').concat(Se("alert.android.extBrowser.autoLoginWorkaround.desc"),'" button="').concat(Se("alert.android.extBrowser.autoLoginWorkaround.button.text"),'"></lui-alert>'),document.body.appendChild(e);var t=document.getElementById("".concat("liffAlert","-").concat(n));t&&t.addEventListener("lui-button-click",(function(){var e=window.open("".concat(window.location.href,"&liffIsEscapedFromApp=true"),"_blank");e&&(e.location.href="".concat(window.location.href,"&liffIsEscapedFromApp=true"),window.close())}))})))];case 4:return t.sent(),[2]}var n}))}))};function it(){return t(this,void 0,void 0,(function(){var e;return n(this,(function(t){switch(t.label){case 0:return oe()||"android"!==Ce()||((e=v.parse(window.location.search))[Be]||e.liffIsEscapedFromApp)?[3,6]:e.liffClientId&&document.referrer.includes("access.".concat("line.me"))?(window.location.href="".concat(window.location.href,"&liffIsEscapedFromApp=true"),[2]):e.liffClientId&&document.referrer.includes("android-app://")?[4,ot()]:[3,2];case 1:t.sent(),t.label=2;case 2:return e.liffClientId&&""===document.referrer&&1===window.history.length?[4,ot()]:[3,4];case 3:t.sent(),t.label=4;case 4:return!document.referrer.includes("liffClientId")||document.referrer.includes("liffIsEscapedFromApp")?[3,6]:[4,ot()];case 5:t.sent(),t.label=6;case 6:return[2]}}))}))}var at=function(e){function r(){var t=null!==e&&e.apply(this,arguments)||this;return t.hooks={before:new xe,after:new xe},t.internalHooks={beforeFinished:new xe,beforeSuccess:new xe,error:new xe},t}return i(r,e),Object.defineProperty(r.prototype,"name",{get:function(){return"init"},enumerable:!1,configurable:!0}),r.prototype.install=function(e){var t=e.liff;return this.liffForWindow=t,this.init.bind(this)},r.prototype.init=function(e,r,o){return t(this,void 0,void 0,(function(){var t;return n(this,(function(n){switch(n.label){case 0:return[4,this.hooks.before.call()];case 1:n.sent(),i=this.liffForWindow,window&&!window.liff&&(window.liff=i),n.label=2;case 2:return n.trys.push([2,9,,11]),[4,Promise.all([Oe(this.liffForWindow),tt(e,this.internalHooks.beforeFinished.call)])];case 3:return n.sent(),Ee(),[4,this.internalHooks.beforeSuccess.call()];case 4:return n.sent(),!e.withLoginOnExternalBrowser||s()?[3,6]:(Fe(),[4,new Promise((function(){}))]);case 5:n.sent(),n.label=6;case 6:return[4,it()];case 7:return n.sent(),[4,this.hooks.after.call()];case 8:return n.sent(),"function"==typeof r&&r(),c(),[3,11];case 9:return t=n.sent(),[4,this.internalHooks.error.call(t)];case 10:throw n.sent(),"function"==typeof o&&o(t),t;case 11:return[2]}var i}))}))},r}(a);export{at as InitModule};
